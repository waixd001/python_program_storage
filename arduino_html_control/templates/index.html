<!DOCTYPE html>
<html>
<title>Control Panel</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link href="https://fonts.googleapis.com/css?family=Noto+Sans+TC" rel="stylesheet"> 
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
<style>
html,body,h1,h2,h3,h4,h5 {font-family: "Noto Sans TC", "Raleway", sans-serif}

.btn-grp .w3-red:hover{
	background-color: #cc352a!important;
}
.btn-grp .w3-blue:hover{
	background-color: #1e7fcc!important;
}

.btn-grp .w3-teal:hover{
	background-color:#00786d!important;
}

.btn-grp .w3-orange:hover{
	background-color:#dd8400!important;
}

table .w3-right{
	margin: 0 20px;
}

textarea {
  resize: none;
  width: 100%;
  height: 100%;
}

.conslelog{
  border: 2px solid grey;
  padding: 7px;
  height: 15em;
  overflow: scroll;
}


</style>
<body class="w3-light-grey">
<!-- Top container -->
<div class="w3-bar w3-top w3-black w3-large" style="z-index:4">
  <button class="w3-bar-item w3-button w3-hide-large w3-hover-none w3-hover-text-light-grey" onclick="w3_open();"><i class="fa fa-bars"></i>  Menu</button>
  <span class="w3-bar-item w3-left">植物保母</span>
</div>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-top:43px;">

  <!-- Header -->
  <header class="w3-container" style="padding-top:22px">
    <h5><b><i class="fas fa-tachometer-alt" id="test_stat"></i> 儀表版</b></h5>
  </header>
  <div class="w3-row-padding w3-margin-bottom">
    <div class="w3-quarter btn-grp">
      <div class="w3-container w3-red w3-padding-16" onClick="mode_change('light')" style="cursor: pointer">
        <div class="w3-left"><i class="fas fa-lightbulb w3-xxxlarge"></i></div>
        <div class="w3-right">
          <h3 id="light_stat">狀態</h3>
        </div>
        <div class="w3-clear"></div>
        <h4>開燈</h4>
      </div>
    </div>
    <div class="w3-quarter btn-grp">
      <div class="w3-container w3-blue w3-padding-16" onClick="mode_change('water')" style="cursor: pointer">
        <div class="w3-left"><i class="fas fa-shower w3-xxxlarge"></i></div>
        <div class="w3-right">
          <h3  id="water_stat">狀態</h3>
        </div>
        <div class="w3-clear"></div>
        <h4>灑水</h4>
      </div>
    </div>
    <div class="w3-quarter btn-grp">
      <div class="w3-container w3-teal w3-padding-16" onClick="mode_change('data')" style="cursor: pointer">
        <div class="w3-left"><i class="fa fa-share-alt w3-xxxlarge"></i></div>
        <div class="w3-right">
          <h3  id="data_stat">狀態</h3>
        </div>
        <div class="w3-clear"></div>
        <h4>重新取得資料</h4>
      </div>
    </div>
    <div class="w3-quarter btn-grp">
      <div class="w3-container w3-orange w3-text-white w3-padding-16" onClick="mode_change('auto')" style="cursor: pointer">
        <div class="w3-left"><i class="fas fa-robot w3-xxxlarge"></i></div>
        <div class="w3-right">
          <h3  id="auto_stat">狀態</h3>
        </div>
        <div class="w3-clear"></div>
        <h4>自動模式</h4>
      </div>
    </div>
  </div>

  <div class="w3-panel">
    <div class="w3-row-padding" style="margin:0 0px">
      <div class="w3-col">
        <h5>詳細資料</h5>
        <table class="w3-table w3-striped w3-white">
          <tr>
            <td><i class="fas fa-temperature-low w3-text-red w3-large"></i></td>
            <td>室內溫度</td>
            <td class="w3-right"><i>25度</i></td>
          </tr>
          <tr>
            <td><i class="fas fa-tint w3-text-blue w3-large"></i></td>
            <td>現時濕度</td>
            <td class="w3-right"><i>30%</i></td>
          </tr>
          <tr>
            <td><i class="fas fa-lightbulb w3-text-yellow w3-large"></i></td>
            <td>光亮程度</td>
            <td  class="w3-right"><i>4.85</i></td>
          </tr>
          <tr>
            <td><i class="fas fa-seedling w3-text-green w3-large"></i></td>
            <td>泥土濕度</td>
            <td  class="w3-right"><i>95%</i></td>
          </tr>
          <tr>
            <td><i class="fa fa-laptop w3-text-red w3-large"></i></td>
            <td>自動模式</td>
            <td  class="w3-right"><i>已開啟</i></td>
          </tr>
          <tr>
            <td><i class="fa fa-share-alt w3-text-green w3-large"></i></td>
            <td>最後取得時間</td>
            <td class="w3-right"><i>2019-4-30 12:00:00</i></td>
          </tr>
        </table>
      </div>
    </div>
  </div>
  <hr>
  <div class="w3-container">
    <h5>General Stats</h5>
    <p>New Visitors</p>
    <div class="w3-grey">
      <div class="w3-container w3-center w3-padding w3-green" style="width:35%">+35%</div>
    </div>

    <p>New Users</p>
    <div class="w3-grey">
      <div class="w3-container w3-center w3-padding w3-orange" style="width:50%">50%</div>
    </div>

    <p>Bounce Rate</p>
    <div class="w3-grey">
      <div class="w3-container w3-center w3-padding w3-red" style="width:75%">75%</div>
    </div>
  </div>
  
  <hr>

  <div class="w3-container">
    <h5>Countries</h5>
    <table class="w3-table w3-striped w3-bordered w3-border w3-hoverable w3-white">
      <tr>
        <td>United States</td>
        <td>65%</td>
      </tr>
      <tr>
        <td>UK</td>
        <td>15.7%</td>
      </tr>
      <tr>
        <td>Russia</td>
        <td>5.6%</td>
      </tr>
      <tr>
        <td>Spain</td>
        <td>2.1%</td>
      </tr>
      <tr>
        <td>India</td>
        <td>1.9%</td>
      </tr>
      <tr>
        <td>France</td>
        <td>1.5%</td>
      </tr>
    </table><br>
    <button class="w3-button w3-dark-grey">More Countries  <i class="fa fa-arrow-right"></i></button>
  </div>
  <hr>
  <div class="w3-container">
    <h5>Consle log</h5>
    <div class="conslelog" id="conslelog_area">
        Conslelog here!<br>
    </div>
  </div>

  <br>
  
  <div class="w3-container w3-dark-grey w3-padding-32">
    <div class="w3-row">
      <div class="w3-container w3-third">
        <h5 class="w3-bottombar w3-border-green">Demographic</h5>
        <p>Language</p>
        <p>Country</p>
        <p>City</p>
      </div>
      <div class="w3-container w3-third">
        <h5 class="w3-bottombar w3-border-red">System</h5>
        <p>Browser</p>
        <p>OS</p>
        <p>More</p>
      </div>
      <div class="w3-container w3-third">
        <h5 class="w3-bottombar w3-border-orange">Target</h5>
        <p>Users</p>
        <p>Active</p>
        <p>Geo</p>
        <p>Interests</p>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="w3-container w3-padding-16 w3-light-grey">
    <h4>FOOTER</h4>
    <p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a></p>
  </footer>

  <!-- End page content -->
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

const socket = io("http://localhost:5000");

socket.on('update', function (data) {
	var target_id = data.item + "_stat";
	document.getElementById(target_id).innerHTML = data.now;
});

function mode_change(data){
	socket.emit('mode changer', data);
}

socket.on('my_response', function (data) {
  var target_id = document.getElementById('conslelog_area');
  target_id.innerHTML += data.data +": "+data.count+"<br>";
  target_id.scrollTop = target_id.scrollHeight;
  console.log(data);
});

</script>

</body>
</html>
